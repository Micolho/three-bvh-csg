var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},a={},t={},r=e.parcelRequirefee5;null==r&&((r=function(e){if(e in a)return a[e].exports;if(e in t){var r=t[e];delete t[e];var o={id:e,exports:{}};return a[e]=o,r.call(o.exports,o,o.exports),o.exports}var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(e,a){t[e]=a},e.parcelRequirefee5=r);var o=r("ilwiq"),n=r("jiuw3"),i=r("fUhpq"),s=r("5Rd1x"),d=r("7lx9d"),l=r("kp7Te"),h=r("8Zfx2"),p=r("4CEV9");window.logTriangleDefinitions=p.logTriangleDefinitions;const c={brush1Shape:"box",brush1Complexity:1,brush1Color:"#ffffff",brush2Shape:"sphere",brush2Complexity:1,brush2Color:"#E91E63",operation:p.SUBTRACTION,wireframe:!1,displayBrushes:!0,displayControls:!0,shadows:!0,vertexColors:!1,flatShading:!1,gridTexture:!1,useGroups:!0,enableDebugTelemetry:!0,displayIntersectionEdges:!1,displayTriangleIntersections:!1,displayBrush1BVH:!1,displayBrush2BVH:!1};let u,m,g,w,y,b,f,C,x,S,T,M,B,v,E,G,I,U,R,O=!0;const A=new Map;function D(e,a,t){switch(e.geometry.dispose(),a){case"sphere":e.geometry=new o.SphereGeometry(1,Math.round(o.MathUtils.lerp(5,32,t)),Math.round(o.MathUtils.lerp(5,16,t)));break;case"box":e.geometry=new o.BoxGeometry(1,1,1);break;case"cylinder":e.geometry=new o.CylinderGeometry(.5,.5,1,Math.round(o.MathUtils.lerp(5,32,t)));break;case"torus":e.geometry=new o.TorusGeometry(.6,.2,Math.round(o.MathUtils.lerp(4,16,t)),Math.round(o.MathUtils.lerp(6,30,t)));break;case"torus knot":e.geometry=new o.TorusKnotGeometry(.6,.2,Math.round(o.MathUtils.lerp(16,64,t)),Math.round(o.MathUtils.lerp(4,16,t)));break;case"mesh":e.geometry=U.clone()}e.geometry=e.geometry.toNonIndexed();const r=e.geometry.attributes.position,n=new Float32Array(3*r.count);for(let e=0,a=n.length;e<a;e+=9)n[e+0]=1,n[e+1]=0,n[e+2]=0,n[e+3]=0,n[e+4]=1,n[e+5]=0,n[e+6]=0,n[e+7]=0,n[e+8]=1;e.geometry.setAttribute("color",new o.BufferAttribute(n,3)),O=!0}function F(){requestAnimationFrame(F),x.scale.x=Math.max(x.scale.x,.01),x.scale.y=Math.max(x.scale.y,.01),x.scale.z=Math.max(x.scale.z,.01);const e=c.enableDebugTelemetry;if(O){O=!1,C.updateMatrixWorld(),x.updateMatrixWorld(),G.update(),I.update();const a=window.performance.now();R.debug.enabled=e,R.useGroups=c.useGroups,R.evaluate(C,x,c.operation,S),S.material=c.useGroups?S.material.map((e=>A.get(e))):B;const t=window.performance.now()-a;y.innerText=`${t.toFixed(3)}ms`,e&&(v.setEdges(R.debug.intersectionEdges),E.setTriangles([...R.debug.triangleIntersectsA.getTrianglesAsArray(),...R.debug.triangleIntersectsA.getIntersectionsAsArray()]))}T.visible=c.wireframe,C.visible=c.displayBrushes,x.visible=c.displayBrushes,M.castShadow=c.shadows,f.enabled=c.displayControls,f.visible=c.displayControls,v.visible=e&&c.displayIntersectionEdges,E.visible=e&&c.displayTriangleIntersections,G.visible=c.displayBrush1BVH,I.visible=c.displayBrush2BVH,u.render(g,m)}!async function(){y=document.getElementById("output"),u=new o.WebGLRenderer({antialias:!0}),u.setPixelRatio(window.devicePixelRatio),u.setSize(window.innerWidth,window.innerHeight),u.setClearColor(1118481,1),u.shadowMap.enabled=!0,u.shadowMap.type=o.PCFSoftShadowMap,u.outputEncoding=o.sRGBEncoding,document.body.appendChild(u.domElement),g=new o.Scene,M=new o.DirectionalLight(16777215,1),M.position.set(-1,2,3),g.add(M,M.target),g.add(new o.AmbientLight(11583173,.1));const e=M.shadow.camera;let a;M.castShadow=!0,M.shadow.mapSize.setScalar(4096),M.shadow.bias=1e-5,M.shadow.normalBias=.01,e.left=e.bottom=-2.5,e.right=e.top=2.5,e.updateProjectionMatrix(),m=new o.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,50),m.position.set(1,2,4),m.far=100,m.updateProjectionMatrix(),b=new(0,s.OrbitControls)(m,u.domElement),f=new(0,i.TransformControls)(m,u.domElement),f.setSize(.75),f.addEventListener("dragging-changed",(e=>{b.enabled=!e.value})),f.addEventListener("objectChange",(()=>{O=!0})),g.add(f),R=new(0,p.Evaluator),R.attributes=["position","normal"],C=new(0,p.Brush)(new o.BoxGeometry,new(0,p.GridMaterial)),x=new(0,p.Brush)(new o.BoxGeometry,new(0,p.GridMaterial)),x.position.set(-.75,.75,0),x.scale.setScalar(.75),D(C,c.brush1Shape,c.brush1Complexity),D(x,c.brush2Shape,c.brush2Complexity),C.material.opacity=.15,C.material.transparent=!0,C.material.depthWrite=!1,C.material.polygonOffset=!0,C.material.polygonOffsetFactor=.2,C.material.polygonOffsetUnits=.2,C.material.side=o.DoubleSide,C.material.premultipliedAlpha=!0,x.material.opacity=.15,x.material.transparent=!0,x.material.depthWrite=!1,x.material.polygonOffset=!0,x.material.polygonOffsetFactor=.2,x.material.polygonOffsetUnits=.2,x.material.side=o.DoubleSide,x.material.premultipliedAlpha=!0,x.material.roughness=.25,x.material.color.set(15277667).convertSRGBToLinear(),C.receiveShadow=!0,x.receiveShadow=!0,f.attach(x),g.add(C,x),a=C.material.clone(),a.side=o.FrontSide,a.opacity=1,a.transparent=!1,a.depthWrite=!0,A.set(C.material,a),a=x.material.clone(),a.side=o.FrontSide,a.opacity=1,a.transparent=!1,a.depthWrite=!0,A.set(x.material,a),A.forEach(((e,a)=>{e.enableGrid=c.gridTexture,a.enableGrid=c.gridTexture})),S=new o.Mesh(new o.BufferGeometry,new o.MeshStandardMaterial({flatShading:!1,polygonOffset:!0,polygonOffsetUnits:.1,polygonOffsetFactor:.1})),S.castShadow=!0,S.receiveShadow=!0,B=S.material,g.add(S),T=new o.Mesh(S.geometry,new o.MeshBasicMaterial({wireframe:!0,color:0,opacity:.15,transparent:!0})),g.add(T),v=new(0,p.EdgesHelper),v.color.set(15277667).convertSRGBToLinear(),g.add(v),E=new(0,p.TriangleSetHelper),E.color.set(48340).convertSRGBToLinear(),g.add(E),G=new(0,h.MeshBVHVisualizer)(C,20),I=new(0,h.MeshBVHVisualizer)(x,20),g.add(G,I);const t=await(new(0,d.GLTFLoader)).setMeshoptDecoder(l.MeshoptDecoder).loadAsync("https://raw.githubusercontent.com/gkjohnson/3d-demo-data/main/models/stanford-bunny/bunny.glb");U=t.scene.children[0].geometry,U.computeVertexNormals(),w=new(0,n.GUI),w.add(c,"operation",{ADDITION:p.ADDITION,SUBTRACTION:p.SUBTRACTION,INTERSECTION:p.INTERSECTION,DIFFERENCE:p.DIFFERENCE}).onChange((()=>{O=!0})),w.add(c,"displayBrushes"),w.add(c,"displayControls"),w.add(c,"shadows"),w.add(c,"useGroups").onChange((()=>O=!0)),w.add(c,"vertexColors").onChange((e=>{C.material.vertexColors=e,C.material.needsUpdate=!0,x.material.vertexColors=e,x.material.needsUpdate=!0,A.forEach((a=>{a.vertexColors=e,a.needsUpdate=!0})),R.attributes=e?["color","position","normal"]:["position","normal"],O=!0})),w.add(c,"gridTexture").onChange((e=>{A.forEach(((a,t)=>{a.enableGrid=e,t.enableGrid=e}))})),w.add(c,"flatShading").onChange((e=>{C.material.flatShading=e,C.material.needsUpdate=!0,x.material.flatShading=e,x.material.needsUpdate=!0,A.forEach((a=>{a.flatShading=e,a.needsUpdate=!0}))}));const r=w.addFolder("brush 1");r.add(c,"brush1Shape",["sphere","box","cylinder","torus","torus knot","mesh"]).name("shape").onChange((e=>{D(C,e,c.brush1Complexity)})),r.add(c,"brush1Complexity",0,2).name("complexity").onChange((e=>{D(C,c.brush1Shape,e)})),r.addColor(c,"brush1Color").onChange((e=>{C.material.color.set(e).convertSRGBToLinear(),A.get(C.material).color.set(e).convertSRGBToLinear()}));const L=w.addFolder("brush 2");L.add(c,"brush2Shape",["sphere","box","cylinder","torus","torus knot","mesh"]).name("shape").onChange((e=>{D(x,e,c.brush2Complexity)})),L.add(c,"brush2Complexity",0,2).name("complexity").onChange((e=>{D(x,c.brush2Shape,e)})),L.addColor(c,"brush2Color").onChange((e=>{x.material.color.set(e).convertSRGBToLinear(),A.get(x.material).color.set(e).convertSRGBToLinear()}));const N=w.addFolder("debug");N.add(c,"enableDebugTelemetry").onChange((()=>O=!0)),N.add(c,"displayIntersectionEdges"),N.add(c,"displayTriangleIntersections"),N.add(c,"wireframe"),N.add(c,"displayBrush1BVH"),N.add(c,"displayBrush2BVH"),window.addEventListener("resize",(function(){m.aspect=window.innerWidth/window.innerHeight,m.updateProjectionMatrix(),u.setSize(window.innerWidth,window.innerHeight)}),!1),window.addEventListener("keydown",(function(e){switch(e.code){case"KeyW":f.setMode("translate");break;case"KeyE":f.setMode("rotate");break;case"KeyR":f.setMode("scale")}})),F()}();
//# sourceMappingURL=simple.5d9f0c3e.js.map
